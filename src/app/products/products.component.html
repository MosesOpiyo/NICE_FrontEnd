<app-navbar></app-navbar>

<section class="shop-component">
    <div class="products">
      <!-- sidebar -->
      <div class="sidebar">
        <app-productsnavbar (dataToParent)="handleDataFromChild($event)"></app-productsnavbar>
        
        <div class="profiletype">
          <div class="widget-title" (click)=toggleVarietyOn() >
            <h2>Coffee Profile&nbsp;
              <i *ngIf="!isShowVariety" class="fa-solid fa-chevron-down"></i>
              <i *ngIf="isShowVariety" class="fa-solid fa-chevron-up"></i>
            </h2>
          </div>
          <!-- <input type="hidden" id="previous_select"> -->
          <ul *ngIf="isShowVariety">
            <div class="options" *ngFor="let flavour of flavourOptions; let indexPosition = index">
              <li class="customRadio">
                <input type="radio" value="{{flavour}}" (click)="optionsFlavorFilter(flavour, indexPosition)" (change)="checkStatus1($event);" id="{{flavour}}" name="{{flavour}}"  />
                <label for="{{flavour}}" [ngClass]="(isChecked && activatedRadio == indexPosition) ? 'active' : '' "><span><span></span></span>{{flavour}}</label>
              </li>
            </div>
          </ul>
        </div>

        <div class="coffeeorigin">
          <div class="widget-title" (click)=toggleFarmsOn()>
            <h2>Coffee Origin&nbsp;
              <i *ngIf="!isShowFarms" class="fa-solid fa-chevron-down"></i>
              <i *ngIf="isShowFarms" class="fa-solid fa-chevron-up"></i>
            </h2>
          </div>
          <!-- <input type="hidden" id="previous_select"> -->
          <ul *ngIf="isShowFarms">
            <div class="origins" *ngFor="let origin of originOptions; let indexPosition2 = index">
              <li class="customRadio">
                <input type="radio" value="{{origin}}" id="{{origin}}" (click)="optionsOriginFilter(origin, indexPosition2)" (change)="checkStatus2($event);"  name="{{origin}}" />
                <label for="{{origin}}" [ngClass]="(isChecked2 && activatedRadio2 == indexPosition2) ? 'active' : '' "><span><span></span></span>{{origin}}</label>
              </li>
            </div>
          </ul>
        </div>

        <div class="specialproducts">
          <div class="widget-title"(click)=togglePriceOn()>
            <h2>Special Products&nbsp;
              <i *ngIf="!isShowPrice" class="fa-solid fa-chevron-down"></i>
              <i *ngIf="isShowPrice" class="fa-solid fa-chevron-up"></i>
            </h2>
          </div>
          <!-- <input type="hidden" id="previous_select"> -->
          <ul *ngIf="isShowPrice">
            <li class="customRadio">
              <input type="radio" value="farm1" id="price1" name="price"/>
              <label for="price1"><span><span></span></span>Pods</label>
            </li>

          <li class="customRadio">
            <input type="radio" value="farm1" id="price2" name="price" />
            <label for="price2" ><span><span></span></span>Decaf</label>
          </li>

          <li class="customRadio">
            <input type="radio" value="farm2" id="price3" name="price" />
            <label for="price3"><span><span></span></span>Cold brew</label>
          </li>
          </ul>
        </div>

      </div>

      <!-- products grid list -->
      <div class="productlist">

        <div *ngIf="filteredProducts == null" class="productlist-content">
          <!-- paginate: { itemsPerPage: itemsPerPage, currentPage: p } -->
          <div class="product-card"  *ngFor="let item of products  | paginate: { itemsPerPage: itemsPerPage, currentPage: p }" data-aos="fade-up">

            
            <a (click)="navigateToChild(item)" class="product-item">
              <div class="product-image">
                <img src="{{cloudinaryUrl}}{{item.img}}" alt="package">
              </div>
          
              <div class="product-name">
                <div class="name">
                  <p>{{item.product.name}}</p>
                </div>
          
                <div class="rating">
                  <p *ngIf="averageRating(item) == 5">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 4">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 3">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 2">
                    <span class="star">★</span>
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 1">
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 0">
                  </p>
                </div>
              </div>
          
              <div class="farm-name">
                <p>Kiaragana Coffee Factory</p>
              </div>
          
              <div class="product-details">
                <p>Origin: {{item.product.origin | titlecase}}</p>
                <p class="fw-bold">{{item.price | currency:'USD'}} / 12oz</p>
              </div>
          
            </a>
          
            <div class="latestadd-actions product-addactions">
              <a role="button" (click)="showAddtocartDialog('500ms', '500ms',item,item.product.name)">
                Add To Cart <i class="fa-solid fa-cart-arrow-down"></i>
              </a>
              <a role="button" (click)="addToWishList(item.id,item)" title="wishlist">
                <i class="fa-solid fa-heart"></i>
              </a>
            </div>
          </div>
        </div>
        
        <div *ngIf="filteredProducts != null" class="productlist-content">
          <!-- paginate: { itemsPerPage: itemsPerPage, currentPage: p } -->
          <div class="product-card"  *ngFor="let item of filteredProducts | paginate: { itemsPerPage: itemsPerPage, currentPage: p }" data-aos="fade-up">

            
            <a routerLink="/shop/{{item.product.name}}/{{item.id}}" class="product-item">
              <div class="product-image">
                  <img src="{{cloudinaryUrl}}{{item.img}}" alt="package">
              </div>

              <div class="product-name">
                <div class="name">
                  <p>{{item.product.name}}</p>
                </div>
                  
                <div class="rating">
                  <p *ngIf="averageRating(item) == 5">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 4">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 3">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 2">
                    <span class="star">★</span>
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 1">
                    <span class="star">★</span>
                  </p>
                  <p *ngIf="averageRating(item) == 0">
                  </p>
                </div>
              </div>

              <div class="farm-name">
                <p>Kiaragana Coffee Factory</p>
              </div>

              <div class="product-details">
                  <p>Origin: {{item.product.origin | titlecase}}</p>
                  <p class="fw-bold">{{item.price | currency:'USD'}} / 12oz</p>
              </div>

            </a>

            <div class="latestadd-actions product-addactions">
              <a role="button" (click)="showAddtocartDialog('500ms', '500ms',item,item.product.name)">
                Add To Cart <i class="fa-solid fa-cart-arrow-down"></i>
              </a>
              <a role="button" title="wishlist">
                  <i class="fa-solid fa-heart"></i>
              </a>
            </div>
          </div>
        </div>

        <div class="products-pagination" *ngIf="products">
          <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls>
        </div>
                             
      </div>
    </div>

    <app-footer></app-footer>
</section>